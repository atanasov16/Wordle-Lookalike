<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>zadaca3</title>
</head>
<body>
<button onclick="moveLeft()"> <</button>
<button onclick="moveRight()"> ></button>
<script>
    data = '[{"background-color":"red", "width":"100px", "height":"100px"},{"background-color":"green", "width":"50px", "height":"100px"}, {"background-color":"blue", "width":"100px", "height":"50px"}]';
    data = JSON.parse(data)

    index = 0
    var newDiv = document.createElement('div')
    newDiv.style.backgroundColor = data[0]['background-color']
    newDiv.style.width = data[0]['width']
    newDiv.style.height = data[0]['height']
    newDiv.style.position = 'absolute'
    newDiv.left = 0
    newDiv.right = 0

    document.body.appendChild(newDiv)

    function changeDiv(index) {
        newDiv.style.backgroundColor = data[index]['background-color']
        newDiv.style.width = data[index]['width']
        newDiv.style.height = data[index]['height']
    }


    function moveLeft() {
        animLeft = setInterval(left, 1)
    }

    function left() {
        newDiv.right -=2
        newDiv.style.left = newDiv.right + 'px'
        if (newDiv.right < -data[index].width.split('px')[0]-5) {
            console.log("leftcheck")
            index++
            if (index >= data.length) {
                index = 0
            }
            changeDiv(index)
            newDiv.right = 200
            newDiv.style.left = newDiv.right + 'px'
        }
        if (newDiv.right === 8) {
            clearInterval(animLeft)
        }
    }

    function moveRight() {
        anim = setInterval(right, 1)
    }

    function right() {
        newDiv.right +=2
        newDiv.style.left = newDiv.right + 'px'
        if (newDiv.right > 200) {
            console.log("leftcheck")
            index--
            if (index < 0) {
                index = data.length - 1
            }
            changeDiv(index)
            newDiv.right = -data[index].width.split("px")[0] - 50
            newDiv.style.left = newDiv.right + 'px'
        }
        if (newDiv.right === 8) {
            clearInterval(anim)
        }
    }

</script>
</body>
</html>